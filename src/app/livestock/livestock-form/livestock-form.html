<div class="form-container">
  <form [formGroup]="rxform" (ngSubmit)="onSubmit()" class="livestock-form">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Livestock Information</mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <!-- Row 1: Tag Number, Species, Breed -->
        <div class="form-row">
          <mat-form-field appearance="outline" class="third-width">
            <mat-label>Tag Number</mat-label>
            <input matInput formControlName="tagNumber" type="text" />
            <mat-error *ngIf="tagNumber.hasError('required')">Tag Number is required.</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="third-width">
            <mat-label>Species</mat-label>
            <mat-select formControlName="species">
              <mat-option *ngFor="let s of speciesOptions" [value]="s.value">{{ s.label }}</mat-option>
            </mat-select>
            <mat-error *ngIf="species.hasError('required')">Species is required.</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="third-width">
            <mat-label>Breed</mat-label>
            <mat-select formControlName="breed">
              <mat-option *ngFor="let b of filteredBreeds" [value]="b.value">{{ b.label }}</mat-option>
            </mat-select>
            <mat-error *ngIf="breed.hasError('required')">Breed is required.</mat-error>
          </mat-form-field>
        </div>

        <!-- Row 2: Sex, Age, Date of Purchase -->
        <div class="form-row">
          <mat-form-field appearance="outline" class="third-width">
            <mat-label>Sex</mat-label>
            <mat-select formControlName="sex">
              <mat-option value="male">Male</mat-option>
              <mat-option value="female">Female</mat-option>
            </mat-select>
            <mat-error *ngIf="sex.hasError('required')">Sex is required.</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="third-width">
            <mat-label>Age</mat-label>
            <input matInput formControlName="age" type="number" min="0" />
            <mat-error *ngIf="age.hasError('required')">Age is required.</mat-error>
            <mat-error *ngIf="age.hasError('min')">Age cannot be negative.</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="third-width">
            <mat-label>Date of Purchase</mat-label>
            <input matInput formControlName="dateOfPurchase" type="date" />
            <mat-error *ngIf="dateOfPurchase.hasError('required')">Date of Purchase is required.</mat-error>
          </mat-form-field>
        </div>

        <!-- Row 3: Farmer, Livestock Group -->
        <div class="form-row">
          <mat-form-field appearance="outline" class="half-width">
            <mat-label>Farmer</mat-label>
            <mat-select formControlName="farmer">
              <mat-option *ngFor="let f of farmers" [value]="f.id">{{ f.name }}</mat-option>
            </mat-select>
            <mat-error *ngIf="farmer.hasError('required')">Farmer is required.</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="half-width">
            <mat-label>Livestock Group</mat-label>
            <mat-select formControlName="livestockGroup">
              <mat-option *ngFor="let g of livestockGroups" [value]="g._id">{{ g.groupName }}</mat-option>
            </mat-select>
            <mat-error *ngIf="livestockGroup.hasError('required')">Livestock Group is required.</mat-error>
          </mat-form-field>
        </div>

        <!-- Row 4: Checkboxes -->
        <div class="form-row">
          <mat-checkbox formControlName="isDeceased">Deceased</mat-checkbox>
          <mat-checkbox formControlName="isInsured">Insured</mat-checkbox>
        </div>
      </mat-card-content>

      <mat-card-actions align="end">
        <button mat-raised-button color="primary" type="submit" [disabled]="rxform.invalid || isLoading">Submit</button>
      </mat-card-actions>
    </mat-card>
  </form>
</div>
